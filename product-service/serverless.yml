service: product-service

frameworkVersion: '3'

plugins:
  - serverless-webpack
  - serverless-offline
  - serverless-dotenv-plugin

provider:
  name: aws
  runtime: nodejs14.x
  region: eu-west-1
  httpApi:
    cors: true
  # vpc:
  #   securityGroupIds:
  #     - sg-
  #   subnetIds:
  #     - subnet-
  #     - subnet-
  #     - subnet-
  iam:
    role:
      statements:
        - Effect: Allow
          Action:
            - ec2:CreateNetworkInterface
            - ec2:DescribeNetworkInterfaces
            - ec2:DeleteNetworkInterface√ü
          Resource: '*'

custom:
  webpack: # serverless-webpack plugin options
    webpackConfig: webpack.config.js # Name of webpack configuration file
    includeModules:
      forceInclude:
        - pg

package:
  individually: true

functions:
  getProductsList:
    handler: src/handler.getProductsList
    events:
      - httpApi:
          method: GET
          path: /products
  getProductsById:
    handler:  src/handler.getProductsById
    events:
      - httpApi:
          method: GET
          path: /products/{id}
  createProduct:
    handler:  src/handler.createProduct
    events:
      - httpApi:
          method: POST
          path: /products


